<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ site.domain }} - {{ site.title }}</title>
    <link rel="stylesheet" href="css/style.css?220506">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <style>
        #summary-box {
            background-color: #f0f0f0;
            padding: 10px;
            margin-bottom: 20px;
        }

        #summary-box h4 {
            margin: 0;
        }
    </style>
</head>

<body>
    <h3 class="page-head">
        <a href="/" class="logo">
            <img src="img/logo.png" alt="{{ site.domain }} - {{ site.title }}" width="128">
            <p><span class="ext">{{ site.title }}</span><span class="dot">·</span><span class="brand">{{ site.title_ext }}</span></p>
        </a>
    </h3>
    <p style="text-align: center;">联系方式：
        {%- for contact in site.contacts -%}
        <a href="{%- if contact.url -%}{{ contact.url }}{%- else -%}javascript:void(0){%- endif -%}">
            <i class="{{ contact.icon }}"></i>
            {{ contact.text }}</a>
        {%- if forloop.last != true -%}&nbsp;·&nbsp;{%- endif -%}
        {%- endfor -%}
    </p>
    <ul id="followers-list">
        {%- for domain in site.domains -%}
        <li>
            <a href="javascript:void(0)">
                <img src="https://eu.ui-avatars.com/api/?background=random&amp;name={{ domain.domain | slice: 0 }}&amp;font-size=0.6">
                <strong>{{ domain.domain }}</strong>
                <span>{{ domain.description }}{%- if domain.price -%}［{{ domain.price }}］{%- endif -%}</span>
                <!-- Calculate remaining days -->
                <script>
                    var regDate = new Date('{{ domain.registration_date }}');
                    var expiryDate = new Date(regDate.setFullYear(regDate.getFullYear() + 1));
                    var today = new Date();
                    var remaining = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
                    document.write('<br>剩余 ' + remaining + ' 天');
                </script>
            </a>
        </li>
        {%- endfor -%}
    </ul>
    <div id="summary-box">
        <h4>域名后缀汇总</h4>
        <ul id="suffix-summary">
            <!-- JavaScript will populate this list -->
        </ul>
        <h4>续费总计金额</h4>
        <p id="renewal-total">
            <!-- JavaScript will populate this -->
        </p>
    </div>
    <footer class="bg-gray-200 flex items-center px-10 py-5 flex justify-between flex-col lg:flex-row mt-16">
        <div class="text-gray-500 text-sm text-center lg:text-left">
            Copyright © 2024 {{ site.domain }}. 长期收单字符. <a class="text-gray-500"
                href="https://github.com/bigtoyscompany/domain-portfolio">年轻的国王</a>
        </div>
    </footer>

    <script>
        // Extract domain suffixes from the list and count them
        var domains = document.querySelectorAll('#followers-list li strong');
        var suffixes = {};
        domains.forEach(function (domain) {
            var suffix = domain.textContent.split('.').pop();
            if (suffixes[suffix]) {
                suffixes[suffix]++;
            } else {
                suffixes[suffix] = 1;
            }
        });

        // Display the summary
        var suffixSummary = document.getElementById('suffix-summary');
        for (var suffix in suffixes) {
            var li = document.createElement('li');
            li.textContent = suffix + ': ' + suffixes[suffix];
            suffixSummary.appendChild(li);
        }

        // Calculate and display the total renewal amount
        var renewalTotal = document.getElementById('renewal-total');
        var totalAmount = 0;
        {%- for domain in site.domains -%}
        {%- if domain.price -%}
        totalAmount += parseFloat('{{ domain.price }}');
        {%- endif -%}
        {%- endfor -%}
        renewalTotal.textContent = totalAmount.toFixed(2);
    </script>
</body>

</html>
